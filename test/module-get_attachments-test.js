/**
 * @file test/module-get_attachments-test.js
 * @description Gets the attachments for an asset in Brandfolder. 
 *
 * Generated by the converse-cli tool for use with the Converse AI
 * Plugins SDK. https://developers.converse.ai/
 */

const request         = require('supertest');
const expect      = require('chai').expect;
const server      = require('./lib/express');
const { token, org_id, brandfolder_id } = require('../lib/env');


describe('Get Attachments', function () {

  it('base', function(done) {
    request(server)
      .post('/')
      .send({
        event: 'MODULE_EXEC',
        payload: {
          moduleId: 'get_attachments',
          moduleParam: {
            asset: 'qflmoc-6nk3lc-3me9t3',
          },
          registrationData: {
            token: token,
            brandfolder_id: brandfolder_id,
            org_id: org_id
          }
        }
      })
      .set('X_CONVERSE_APP_TOKEN', require('../app-token'))
      .expect(200)
      .end(function(err, res) {
        if (err) {
          console.error(err)
        }
        expect(res.body).to.have.property('status').to.equal(0);
        expect(res.body).to.have.property('value');
        done();
      });
  })
});
